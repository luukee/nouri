{%- assign blockSizing = section.settings.block_sizing -%}

{%- capture gridOneBlockSizing -%}
{%- if blockSizing == 'left' -%} medium-up--one-third{%- else -%} medium-up--one-half{%- endif -%}
{%- endcapture -%}

{%- capture gridTwoBlockSizing -%}
{%- if blockSizing == 'left' -%} medium-up--one-half medium-up--push-one-sixth{%- else -%} medium-up--one-third{%- endif -%}
{%- endcapture -%}


<section class="{{ section.id }} grid">
    <div class="grid__item {{ gridOneBlockSizing }} ingredients-info">
        <h2 class="title">{{ section.settings.title }}</h2>
        <h2 class="pho-title">{{ section.settings.title }}</h2>

        <p>{{ section.settings.subheader }}</p>

        <p><b>{{ section.settings.subheader_bold }}</b></p>

        {{ section.settings.content }}

        <div class="description-list">
            {%- for block in section.blocks -%}

            <div class="description-item {% if block.settings.link_dropdown %}link{% endif %}">

                <dt {{ block.shopify_attributes }}>
                    {% if block.settings.link_dropdown %}

                    {% if block.settings.link_dropdown_link != blank %}
                      <a href="{{ block.settings.link_dropdown_link }}" target="_blank">
                          <b class="true">{{- block.settings.question -}}</b>
                      </a>
                    {% endif %}

                    {% else %}
                    <b>{{- block.settings.question -}}</b>
                    {% endif %}
                </dt>

                <dd {{ block.shopify_attributes }}>
                    {% if block.settings.answer != empty %}
                        {{- block.settings.answer -}}
                    {% endif %}
                    {% if block.settings.html_answer != empty %}
                        {{- block.settings.html_answer -}}
                    {% endif %}
                    {% if block.settings.dropdown_image != empty %}
                        {% assign img_url = block.settings.dropdown_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' %}
                        <img class="ingredient__image lazyload"
                          data-src="{{ img_url }}"
                          data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                          data-aspectratio="{{ section.settings.image.aspect_ratio }}"
                          data-sizes="auto"
                          alt="{{ section.settings.image.alt | escape }}">
                    {% endif %}
                </dd>

            </div>

            {%- endfor -%}

        </div>
    </div>

    <div class="grid__item {{ gridTwoBlockSizing }} ingredients-image">
        {%- if section.settings.image == blank -%}
        <div class="placeholder-background">
            {% capture current %}{% cycle 1, 2 %}{% endcapture %}
            {{ 'lifestyle-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
        {%- else -%}
        <img src="{{ section.settings.image | img_url: 'master' }}" alt="{{ image.alt | escape }}">
        {%- endif -%}
        <img class="graphic" src="https://cdn.shopify.com/s/files/1/2911/8128/files/nouri-probiotic-omega-pink-pattern.svg?19208" alt="">
    </div>
</section>


{% schema %}
{
    "settings": [
    {
        "type": "header",
        "content": "Image"
    },
    {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
    },
    {
        "type": "select",
        "id": "block_sizing",
        "label": "Block Sizing",
        "default": "left",
        "options": [
        {
            "value": "right",
            "label": "1/3 + 2/3"
        },
        {
            "value": "left",
            "label": "2/3 + 1/3"
        }
        ]
    },
    {
        "type": "select",
        "id": "alignment",
        "label": "Image Side",
        "default": "row",
        "options": [
        {
            "value": "row",
            "label": "Right"
        },
        {
            "value": "row-reverse",
            "label": "Left"
        }
        ]
    },
    {
        "type": "header",
        "content": "Head Section"
    },
    {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Probiotic"
    },
    {
        "type": "text",
        "id": "subheader",
        "label": "Subheader",
        "default": "Subheader"
    },
    {
        "type": "text",
        "id": "subheader_bold",
        "label": "Subheader Bold",
        "default": "Subheader Bold"
    },
    {
        "type": "richtext",
        "id": "content",
        "label": "Content",
        "default": "<p>Nouri’s probiotic combines 5 unique strains focused on boosting your brain health.</p>"
    }
    ],
    "name": "Ingredients One",
    "blocks" : [
    {
        "type": "text",
        "name": "ingredients",
        "settings": [
        {
            "type": "checkbox",
            "id": "link_dropdown",
            "label": "link",
            "default": false
        },
        {
          "type": "url",
          "id": "link_dropdown_link",
          "label": {
            "de": "Button-Etikett",
            "en": "Button link",
            "es": "Enlace de botón",
            "fr": "Lien du bouton",
            "it": "Link pulsante",
            "ja": "ボタンリンク",
            "nl": "Knoplink",
            "pt-BR": "Link do botão",
            "zh-CN": "按钮链接",
            "zh-TW": "按鈕連結"
        }
      },
        {
            "type": "textarea",
            "id": "question",
            "label": "Question",
            "default": "You have a question?"
        },
        {
            "type": "richtext",
            "id": "answer",
            "label": "Answer",
            "default": "<p>Here's your answer!</p>"
        },
        {
            "type": "html",
            "id": "html_answer",
            "label": "Custom HTML"
        },
        {
            "type": "image_picker",
            "id": "dropdown_image",
            "label": "Image"
        }
        ]
    }
    ]
}
{% endschema %}
